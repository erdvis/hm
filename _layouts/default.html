<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">

{%- include head.html -%}

<body class="{% if site.darkmode == true and site.darkmode != 'never' %}dark{% endif %}">
  
  {%- include header.html -%}

  <main class="page-content" aria-label="Content">
    <div class="wrapper">      
      <button id="download-button">Download as PDF</button>
    </div>
  </main>

  
  <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
      
 <script>
    const jsPDF = window.jspdf.jsPDF;
const downloadButton = document.getElementById('download-button');
downloadButton.addEventListener('click', () => {
  downloadButton.style.display = "none"; // hide the download button before taking the screenshot
  html2canvas(document.body, {
    scale: 1.3,
    scrollX: 0,
    scrollY: -window.scrollY,
    windowWidth: document.documentElement.offsetWidth,
    windowHeight: document.documentElement.offsetHeight
  }).then(canvas => {
    const imgData = canvas.toDataURL('image/png');
    const pdf = new jsPDF('l', 'pt', 'a4'); // 'l' for landscape
    const imgProps = pdf.getImageProperties(imgData);
    const imgWidth = pdf.internal.pageSize.getWidth();
    const imgHeight = canvas.height * imgWidth / canvas.width;
    pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
    pdf.save('cv.pdf');
    downloadButton.style.display = "block"; // show the download button after the PDF is saved
  });
});


 </script>

 {%- if jekyll.environment == 'production' and site.gtm -%}
   {%- include gtm_body.html -%}
 {%- endif -%}

 {%- include about.html -%}

 {%- if site.data.experience.size > 0 -%}
   {%- include experience.html -%}
 {%- endif -%}

 {%- if site.data.education.size > 0 -%}
   {%- include education.html -%}
 {%- endif -%}

 {%- if site.more_content -%}
   {%- include more.html -%}
 {%- endif -%}

 {%- include footer.html -%}
 
 {% if site.darkmode == false %}
   <script src="{{ '/assets/js/index.js' | relative_url }}"></script>
 {% endif %}
 
</body>
</html>
